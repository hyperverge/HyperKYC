<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0" />
    <link rel="preload" href="https://d2xx0mnrufenv6.cloudfront.net/hyperverge-web-sdk@8.7.1/src/sdk.native.min.js" as="script" />
    <!-- <script src="../src/sdk.native.min.js"></script> -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.9.6/lottie.min.js" as="script" />
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.9.6/lottie.min.js" as="script" />
</head>

<body>
     <script src="https://d2xx0mnrufenv6.cloudfront.net/hyperverge-web-sdk@8.7.1/src/sdk.native.min.js"></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.9.6/lottie.min.js"></script>
</body>
<script type="text/javascript">
    (function (c, l, a, r, i, t, y) {
        c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
        t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
        y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
    })(window, document, "clarity", "script", "mn4nvovyjk");

    //  TODO: Understand more about this code and check if we can strip out unnecessary functions
    function getQueryParams() {
        //  FIXME: `url` is not used, can be removed?
        // Get the current URL
        const url = window.location.href;

        // Parse the URL
        const urlParams = new URLSearchParams(window.location.search);

        // Create an object to hold the query parameters
        const params = {};

        // Iterate over all query parameters and add them to the object
        urlParams.forEach((value, key) => {
            params[key] = value;
        });

        return params;
    }
    const queryParams = getQueryParams();

    // Custom code to set the user ID
    clarity("set", "userId", queryParams?.tnxId || 'unknown');
    
    
    //  FIXME: Remove this once formv2 is optimised
    function startLoader() {
      const hyperKycConfig = new HyperKycConfig(
        "jwtToken",
        "workflowId",
        "transactionId"
      );
      hyperKycConfig.clientLogo = '';
      //    hyperKycConfig.supportDarkMode(true);
      startLottieLoader({ config: hyperKycConfig, lottie: '',  mainDescription: '', subDescription: '' });
    }
    //  FIXME: Remove this once formv2 is optimised
    document.addEventListener("DOMContentLoaded", (event) => {
      startLoader();
    });
</script>

</html>
